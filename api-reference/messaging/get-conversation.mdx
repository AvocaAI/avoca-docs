---
title: 'Get SMS Conversation'
api: 'GET /messaging/conversations/{phone_number}'
description: 'Retrieve the full SMS conversation history with a customer'
---

<Note>
  This endpoint retrieves the complete SMS conversation history with a customer, including both sent and received messages. Useful for customer service and context when handling inquiries.
</Note>

## Request

<ParamField path="phone_number" type="string" required>
  Customer phone number in E.164 format (e.g., +13105551234)
</ParamField>

<ParamField query="limit" type="number" default="50">
  Maximum number of messages to return (1-200)
</ParamField>

<ParamField query="offset" type="number" default="0">
  Number of messages to skip for pagination
</ParamField>

<ParamField query="start_date" type="string">
  Filter messages after this date (ISO 8601)
</ParamField>

<ParamField query="end_date" type="string">
  Filter messages before this date (ISO 8601)
</ParamField>

<ParamField query="include_metadata" type="boolean" default="true">
  Include message metadata (delivery status, campaign info, etc.)
</ParamField>

## Response

<ResponseField name="phone_number" type="string">
  Customer's phone number
</ResponseField>

<ResponseField name="customer_id" type="string">
  Associated customer ID if available
</ResponseField>

<ResponseField name="customer_info" type="object">
  Customer details
  
  <Expandable title="properties">
    <ResponseField name="first_name" type="string">
      Customer's first name
    </ResponseField>
    
    <ResponseField name="last_name" type="string">
      Customer's last name
    </ResponseField>
    
    <ResponseField name="email" type="string">
      Customer's email
    </ResponseField>
    
    <ResponseField name="opt_out_status" type="boolean">
      Whether customer has opted out of SMS
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="messages" type="array">
  Array of messages in chronological order
  
  <Expandable title="properties">
    <ResponseField name="id" type="string">
      Message ID
    </ResponseField>
    
    <ResponseField name="direction" type="string">
      Message direction:
      - `inbound` - From customer
      - `outbound` - To customer
    </ResponseField>
    
    <ResponseField name="text" type="string">
      Message content
    </ResponseField>
    
    <ResponseField name="timestamp" type="string">
      ISO 8601 timestamp
    </ResponseField>
    
    <ResponseField name="status" type="string">
      Message status
    </ResponseField>
    
    <ResponseField name="campaign_type" type="string">
      Campaign type for outbound messages
    </ResponseField>
    
    <ResponseField name="appointment_id" type="string">
      Related appointment ID if applicable
    </ResponseField>
    
    <ResponseField name="media_urls" type="array">
      URLs of any attached media
    </ResponseField>
    
    <ResponseField name="ai_processed" type="boolean">
      Whether AI processed this message
    </ResponseField>
    
    <ResponseField name="ai_response" type="object">
      AI processing details
      
      <Expandable title="properties">
        <ResponseField name="intent" type="string">
          Detected customer intent
        </ResponseField>
        
        <ResponseField name="action_taken" type="string">
          Action taken by AI
        </ResponseField>
        
        <ResponseField name="confidence" type="number">
          AI confidence score (0-1)
        </ResponseField>
      </Expandable>
    </ResponseField>
  </Expandable>
</ResponseField>

<ResponseField name="last_activity" type="string">
  ISO 8601 timestamp of last message
</ResponseField>

<ResponseField name="unread_count" type="number">
  Number of unread inbound messages
</ResponseField>

<ResponseField name="total_messages" type="number">
  Total message count in conversation
</ResponseField>

<ResponseField name="pagination" type="object">
  Pagination information
  
  <Expandable title="properties">
    <ResponseField name="limit" type="number">
      Messages per page
    </ResponseField>
    
    <ResponseField name="offset" type="number">
      Current offset
    </ResponseField>
    
    <ResponseField name="has_more" type="boolean">
      Whether more messages exist
    </ResponseField>
  </Expandable>
</ResponseField>

<RequestExample>

```bash cURL
curl -X GET "https://api.avoca.ai/v1/messaging/conversations/+13105559876?limit=20" \
  -H "Authorization: Bearer YOUR_API_KEY" \
  -H "X-Workspace-ID: YOUR_WORKSPACE_ID"
```

```javascript Node.js
// Get recent conversation
const conversation = await client.messaging.getConversation('+13105559876', {
  limit: 20,
  includeMetadata: true
});

// Display conversation
conversation.messages.forEach(msg => {
  const arrow = msg.direction === 'inbound' ? '<<' : '>>';
  console.log(`${arrow} ${msg.text} [${msg.timestamp}]`);
});

// Get messages for specific date range
const dateRangeMessages = await client.messaging.getConversation('+13105559876', {
  startDate: '2024-01-01T00:00:00Z',
  endDate: '2024-01-31T23:59:59Z'
});
```

```python Python
# Get recent conversation
conversation = client.messaging.get_conversation(
    phone_number='+13105559876',
    limit=20,
    include_metadata=True
)

# Display conversation
for msg in conversation['messages']:
    arrow = '<<' if msg['direction'] == 'inbound' else '>>'
    print(f"{arrow} {msg['text']} [{msg['timestamp']}]")

# Check for unread messages
if conversation['unread_count'] > 0:
    print(f"\n{conversation['unread_count']} unread messages")

# Get customer's opt-out status
if conversation['customer_info']['opt_out_status']:
    print("Warning: Customer has opted out of SMS")
```

</RequestExample>

<ResponseExample>

```json
{
  "data": {
    "phone_number": "+13105559876",
    "customer_id": "cust_abc123",
    "customer_info": {
      "first_name": "John",
      "last_name": "Smith",
      "email": "john.smith@email.com",
      "opt_out_status": false
    },
    "messages": [
      {
        "id": "msg_123",
        "direction": "outbound",
        "text": "Hi John, this is ABC Plumbing confirming your appointment tomorrow at 9 AM. Reply CONFIRM to confirm or RESCHEDULE to change.",
        "timestamp": "2024-01-19T18:00:00Z",
        "status": "delivered",
        "campaign_type": "appointment_reminder",
        "appointment_id": "appt_def456",
        "media_urls": [],
        "ai_processed": false
      },
      {
        "id": "msg_124",
        "direction": "inbound",
        "text": "CONFIRM",
        "timestamp": "2024-01-19T18:05:00Z",
        "status": "received",
        "ai_processed": true,
        "ai_response": {
          "intent": "appointment_confirmation",
          "action_taken": "appointment_confirmed",
          "confidence": 0.98
        }
      },
      {
        "id": "msg_125",
        "direction": "outbound",
        "text": "Great! Your appointment is confirmed for tomorrow at 9 AM. Your technician Mike will arrive between 9-11 AM. See you then!",
        "timestamp": "2024-01-19T18:05:30Z",
        "status": "delivered",
        "campaign_type": "appointment_confirmation",
        "appointment_id": "appt_def456"
      }
    ],
    "last_activity": "2024-01-19T18:05:30Z",
    "unread_count": 0,
    "total_messages": 47,
    "pagination": {
      "limit": 20,
      "offset": 0,
      "has_more": true
    }
  },
  "meta": {
    "request_id": "req_mno345",
    "timestamp": "2024-01-20T10:00:00Z"
  }
}
```

</ResponseExample>